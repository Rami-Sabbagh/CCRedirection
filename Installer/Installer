--Git Installer By : RamiLego--
--Vars--
if not http then
	error("Please Enable HTTP")
end

local git = {}
git.Link = "https://raw.github.com/RamiLego4Game/CCRedirection/master/Installer/Pkg-List"
git.wDir = ""
write("Downloading Pkg-List")
git.page = http.get(git.Link)
print(" Done !")

--Functions--
function git.action(nAction)
	local comd = string.sub(nAction,1,5)
	if comd == "mkdir" then
		local data = string.sub(nAction,7,-1)
		if not fs.exists(git.wDir..data) then
			fs.makeDir(git.wDir.."/"..data)
			print("Making Dir "..git.wDir.."/"..data)
		end
	elseif comd == "cddir" then
		local data = string.sub(nAction,7,-1)
		if fs.exists(git.wDir.."/"..data) and fs.isDir(git.wDir.."/"..data) then
			git.wDir = git.wDir.."/"..data
			print("Working Dir Changed To "..git.wDir)
		end
	elseif comd == "filen" then
		local data = string.sub(nAction,7,-1)
		
		print("Downloading "..git.wDir.."/"..data)
		local gitF = fs.open(git.wDir.."/"..data,"w")
		local gitL = git.page.readLine()
		local gitH = http.get(gitL)
		
		gitF.write(gitH.readAll())
		gitF.flush()
		gitF.close()
		
		gitH.close()
	elseif comd == "endof" then
		return "Done"
	end
end

function git.launch()
	local text = ""
	while true do
		text = git.page.readLine()
		local isExit = git.action(text)
		if isExit == "Done" then 
			print("Downloading CCRedirection Done !")
			break
		end
	end
end
--Launcher--
git.launch()
